(this["webpackJsonpreact-restaurant-app"]=this["webpackJsonpreact-restaurant-app"]||[]).push([[0],{15:function(e,t,r){},17:function(e,t,r){},19:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),s=r(9),a=r.n(s),i=(r(15),r(3)),o=r(5),d=r.n(o),l=r(8),u=r(2),j=(r(17),r(10)),b=Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});var m=function(e){return b.format(e/100)},O=r(0);function p(e){var t=e.item;return Object(O.jsx)("div",{className:"menu-item-container",children:Object(O.jsxs)("div",{className:"menu-item",children:[Object(O.jsx)("h4",{children:t.title}),Object(O.jsx)("p",{children:t.description}),Object(O.jsxs)("p",{children:[m(t.price)," "]}),Object(O.jsx)("button",{className:"addbutton",onClick:function(){return e.onAdd()},children:"Add to Order"})]})})}var h=r.p+"static/media/cannoli.660cd183.jpg",f=r.p+"static/media/pizza.644b0911.jpg",x=r.p+"static/media/salad.883913d4.jpg",g=r.p+"static/media/soda.269ed8a5.jpg";var v=function(e){var t,r=e.menuItems,n=null===(t=r[0])||void 0===t?void 0:t.category;return console.log("category",n),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"menu-items-img-section",children:["Beverages"==n&&Object(O.jsx)("img",{src:g,alt:"alt text here"}),"Desserts"==n&&Object(O.jsx)("img",{src:h,alt:"alt text here"}),"Salads"==n&&Object(O.jsx)("img",{src:x,alt:"alt text here"}),"Pizzas"==n&&Object(O.jsx)("img",{src:f,alt:"alt text here"}),Object(O.jsx)("div",{className:"items-section",children:r.map((function(t){return Object(O.jsx)(p,{category:n,item:t,onAdd:function(){return r=t,!0===e.order.submitted?e.setOrder({submitted:!1,items:[r]}):e.setOrder(Object(i.a)(Object(i.a)({},e.order),{},{items:[].concat(Object(j.a)(e.order.items),[r])})),void console.log("item",r);var r}},t.id)}))})]})})};var y=function(e){var t=e.order.items.map((function(e){return Object(O.jsxs)("div",{children:[Object(O.jsx)("h4",{children:e.title}),Object(O.jsx)("p",{children:m(e.price)})]})})),r=Object(n.useState)(""),c=Object(u.a)(r,2),s=c[0],a=c[1],i=Object(n.useState)(""),o=Object(u.a)(i,2),d=o[0],l=o[1];return Object(O.jsxs)("div",{className:"order-container",children:[" ",Object(O.jsxs)("div",{className:"order-display",children:[Object(O.jsx)("h3",{children:"order details"}),t,Object(O.jsxs)("p",{children:["Total: ",m(function(){var t=0;return e.order.items.forEach((function(e){console.log("type",e.title,typeof e.price),t+=e.price})),console.log({total:t}),t}())]}),Object(O.jsx)("div",{className:"form-container",children:Object(O.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.addOrder(e.order,s,d),a(""),l("")},children:[Object(O.jsx)("label",{children:Object(O.jsx)("h4",{children:"Please enter your name and number to complete order."})}),Object(O.jsx)("input",{name:"name-input",value:s,onChange:function(e){a(e.target.value)},type:"text",placeholder:"Name",style:{fontFamily:"Montserrat"}}),Object(O.jsx)("input",{name:"phone-num-input",value:d,onChange:function(e){l(e.target.value)},type:"tel",placeholder:"Phone",style:{fontFamily:"Montserrat"}}),Object(O.jsx)("button",{className:"submitbtn",type:"submit",children:"Submit Order"})]})})]})]})},S="https://django-restaurant-api-kattyeye.herokuapp.com/api_v1";var N=function(){var e,t=Object(n.useState)({items:[],submitted:!1}),r=Object(u.a)(t,2),c=r[0],s=r[1],a=Object(n.useState)("menuScreen"),o=Object(u.a)(a,2),j=o[0],b=o[1],p=Object(n.useState)([]),h=Object(u.a)(p,2),f=h[0],x=h[1];function g(e,t,r){return N.apply(this,arguments)}function N(){return N=Object(l.a)(d.a.mark((function e(t,r,n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={order:t,name:r,phone_number:n},e.next=3,fetch("".concat(S,"/orders/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 3:e.sent.ok&&(b("successScreen"),localStorage.setItem("order",JSON.stringify(Object(i.a)(Object(i.a)({},t),{},{submitted:!0}))));case 5:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://django-restaurant-api-kattyeye.herokuapp.com/api_v1/menu-items/");case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,console.log("data",r),x(r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("order"));s(e||{items:[],submitted:!1})}),[]),Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("order"));e&&!0===e.submitted&&(console.log({order:c}),localStorage.clear()),localStorage.setItem("order",JSON.stringify(c))}),[c]);var k=f.filter((function(e){return"Salads"===e.category})),I=f.filter((function(e){return"Pizzas"===e.category})),P=f.filter((function(e){return"Desserts"===e.category})),C=f.filter((function(e){return"Beverages"===e.category}));return console.log("Salads",k),"menuScreen"===j?e=Object(O.jsxs)("div",{className:"items-container",children:[Object(O.jsx)(v,{menuItems:I,order:c,setOrder:s,addOrder:g}),Object(O.jsx)(v,{menuItems:k,order:c,setOrder:s,addOrder:g}),Object(O.jsx)(v,{menuItems:P,order:c,setOrder:s,addOrder:g}),Object(O.jsx)(v,{menuItems:C,order:c,setOrder:s,addOrder:g})]}):"orderScreen"===j?(e=Object(O.jsx)(y,{order:c,setOrder:s,addOrder:g}),c.items.map((function(e){return Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{children:e.name}),Object(O.jsx)("p",{children:m(e.price)})]})}))):"successScreen"===j&&(e=Object(O.jsxs)("div",{className:"success-card-container",children:[" ",Object(O.jsxs)("div",{className:"success-card",children:[" ",Object(O.jsx)("h3",{children:"Thank you for your order! It will be ready for pickup shortly."}),Object(O.jsx)("h4",{children:"Payment upon pickup."})]})]})),Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)("header",{className:"title",children:Object(O.jsx)("h1",{children:"Debbie's Pizza Palace"})}),Object(O.jsx)("nav",{className:"nav-bar",children:Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsx)("button",{type:"button",onClick:function(){return b("menuScreen")},children:"MENU"})}),Object(O.jsx)("li",{children:Object(O.jsxs)("button",{type:"button",onClick:function(){return b("orderScreen")},children:["MY ORDER (",c.items.length,")"]})})]})}),Object(O.jsx)("main",{children:e})]})},k=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,20)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;r(e),n(e),c(e),s(e),a(e)}))};a.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(N,{})}),document.getElementById("root")),k()}},[[19,1,2]]]);
//# sourceMappingURL=main.d8bcfd9a.chunk.js.map